# HTTP 리다이렉트
URL 리다이렉션 혹은 URL 포워딩 페이지 단위의 실제 리소스, 폼 혹은 전체 웹 애플리케이션이 다른 URL에 위치하고 있는 상태에서 링크를 존속시키는 기술이다. HTTP는 많은 목표를 위해 사용되는 이런 동작을 수행하기 위해 특별한 종류의 응답 상태인 HTTP 리다이렉트를 제공한다. 
</br></br>

## 원칙
리다이렉션은 요청에 대한 특별한 응답을 전송함으로써 촉발된다. HTTP 리다이렉트는 3xx 상태 코드를 지닌 응답이다. 리다이렉트 응답을 수신한 브라우저는 제공된 새로운 URL을 사용하고 그것을 즉시 로드한다. 대부분의 경우, 리다이레견은 사용자에게 보이지 않고 적은 성능 저하가 발생한다. 
![Alt text](/images/image9.png)</br>
리다이렉션은 3가지 카테고리고 나누어진다. 영속적, 일시적, 특수 리다이렉션

### 영속적인 리다이렉션
영원히 지속된다. 원래의 URL은 사용되지 않아야 함을 나타낸다. 
![Alt text](/images/image10.png)</br>
308은 GET이 아닌 메서드를 사용할 때 동작의 애매모호함을 제거하고자 만들어졌다.

### 일시적인 리다이렉션
요청된 리소스의 표준 위치에 접근할 수 없고, 다른 위치에서 접근 가능한 경우가 있다. 이런 경우 일시적인 리다이렉트가 사용될 수 있다. 
![Alt text](/images/image11.png)</br>
307은 GET이 아닌 다른 메서드들을 사용하는 경우 동작의 애매모호함을 제거하기 위해 만들어졌다.

### 특수 리다이렉션
- 304 not modified: 로컬에 캐시된 복사본으로 페이지를 리다이렉트시킨다.
- 300 Multiple Choice: 수동 리다이렉션으로, 브라우저에 의해 웹 페이지로 표현되는 본문은 가능한 리다이렉션을 나열하며 사용자는 그 중 하나를 선택하기 위해 클릭합니다.
![Alt text](/images/image12.png)</br>
</br></br>

## 리다이렉션을 멸시하는 대체 방법
#### HTML 리다이렉션
해당 페이지를 보여줄 때, 브라우저는 이 엘리먼트를 발견하고 표시된 페이지로 이동한다.
```
<head>
  <meta http-equiv="refresh" content="0;URL='http://www.example.com/'" />
</head>
```
#### JavaScript 리다이렉션
JavaScript 내에서의 리다이렉션은 window.location (en-US) 프로퍼티에 값을 설정해서 만들어지며 새로운 페이지가 로드된다.
```
window.location = "http://www.example.com/";
```
### 우선 순위
1. 페이지가 읽히거나 전송된 적이 없는 경우, HTTP 리다이렉트가 항상 먼저 실행
2. 어떤 HTTP 리다이렉트로 없는 경우, HTML 리다이렉트(meta 태그)가 실행
3.javascript는 가장 마지막으로, 클라이언트가 javascript를 활성화시킨 셩우에만 사용 가능
</br></br>

## 유스케이스
리다이렉트들은 성능과 직결되므로, 사용은 최소한으로 유지해야 한다.

### 도메인 앨리어싱
- 하나의 리소스에 대한 대체 이름을 가지고 싶은 경우. 예를 들어, example.com을 통한 접근도 가능하도록 www.example.com로 리다이렉션 해줘야 한다. 
- 도메인이 아예 변경되어 예전 리소스로 접근할 때, 새로운 사이트로 리다이렉션 되는 경우도 해당한다. 
- HTTP요청을 HTTPS로 리다이렉트

### 링크 유지하기 
이전 URL에서 새로운 URL로의 리다이렉트를 설정

### 안전하지 않은 요청에 대한 일시적인 응답
요청에 대한 응답을 전송하고, 사용자가 이후에 새로고침을 누르면 요청이 다시 보내질 수 있다. 이런경우, 서버는 303 See Other 요청을 회신할 수 있는데, 새로고침이 눌리면 안전하지 않은 요청이 재연되지 않고 동일한 페이지가 다시 보인다.

### 긴 요청에 대한 일시적인 응답
서버에서 시간이 많이 필요한 경우, 303 See Other 리다이렉트로, 어떤 동작이 예정되어 있고 진행률에 관해 알려주고 그 동작을 취소할 수 있도록 해주는 페이지로 디라이렉트 된다.






</br></br></br></br></br></br>
----
- https://developer.mozilla.org/ko/docs/Web/HTTP/Redirections